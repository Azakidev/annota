#!/bin/sh

flatpak build --with-appdir --allow=devel --bind-mount=/run/user/1000/doc=/run/user/1000/doc/by-app/com.Azakidev.Annota.Devel --share=ipc --socket=fallback-x11 --socket=wayland --device=dri --env=RUST_LOG=test_app=debug --env=G_MESSAGES_DEBUG=none --env=RUST_BACKTRACE=1 --talk-name=org.freedesktop.portal.* --talk-name=org.a11y.Bus --bind-mount=/run/flatpak/at-spi-bus=/run/user/1000/at-spi/bus_0 --env=AT_SPI_BUS_ADDRESS=unix:path=/run/flatpak/at-spi-busguid=67134116ff8092a08cec4eeb64d0ad52 --env=DESKTOP_SESSION=hyprland --env=LANG=en_US.UTF-8 --env=WAYLAND_DISPLAY=wayland-1 --env=XDG_CURRENT_DESKTOP=Hyprland --env=XDG_SEAT=seat0 --env=XDG_SESSION_DESKTOP=hyprland --env=XDG_SESSION_ID=3 --env=XDG_SESSION_TYPE=wayland --env=XDG_VTNR=2 --env=PATH=/usr/local/bin:/usr/bin:/app/bin:/usr/bin:/usr/lib/sdk/rust-stable/bin:/usr/lib/sdk/llvm16/bin --env=LD_LIBRARY_PATH=/app/lib --env=PKG_CONFIG_PATH=/app/lib/pkgconfig:/app/share/pkgconfig:/usr/lib/pkgconfig:/usr/share/pkgconfig --share=network --bind-mount=/run/host/fonts=/usr/share/fonts --bind-mount=/run/host/fonts-cache=/var/cache/fontconfig --filesystem=/home/zazag/.local/share/fonts:ro --filesystem=/home/zazag/.cache/fontconfig:ro --bind-mount=/run/host/user-fonts-cache=/home/zazag/.cache/fontconfig --bind-mount=/run/host/font-dirs.xml=/home/zazag/.cache/font-dirs.xml /home/zazag/Projects/annota/.flatpak/repo /usr/lib/sdk/rust-stable/bin/rust-analyzer "$@"